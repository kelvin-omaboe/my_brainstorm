<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Idea Logger</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        #appContent {
            display: none;
        }

        #editorToolbar button {
            margin-right: 0.25rem;
            margin-bottom: 0.25rem;
        }

        iframe.gdrive-embed {
            width: 100%;
            height: 300px;
            border: none;
            margin-top: 10px;
            border-radius: 10px;
        }
    </style>
</head>

<body class="bg-gradient-to-br from-purple-100 to-blue-100 min-h-screen flex flex-col">

    <!-- Password Popup -->
    <div id="passwordPopup" class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50">
        <div class="bg-white p-6 rounded-2xl shadow-xl w-80 text-center">
            <h2 class="text-xl font-bold mb-4 text-purple-700">üîí Verify Identity</h2>
            <p class="mb-4 text-gray-600">Enter password to continue</p>
            <input id="passwordInput" type="password" placeholder="Password"
                class="w-full p-2 mb-4 border rounded-xl focus:outline-none focus:ring-2 focus:ring-purple-400">
            <button onclick="checkPassword()"
                class="w-full bg-gradient-to-r from-purple-500 to-blue-500 text-white py-2 rounded-xl hover:opacity-90">Unlock</button>
            <p id="errorMsg" class="text-red-500 text-sm mt-2 hidden">Incorrect password!</p>
        </div>
    </div>

    <!-- Main App Content -->
    <div id="appContent" class="flex flex-col sm:flex-row flex-1">

        <!-- Idea Logger -->
        <div class="flex-1 flex flex-col items-center p-6 overflow-y-auto">
            <h1 class="text-4xl font-extrabold mb-8 text-purple-700 drop-shadow">üí° Brainstorming Center</h1>

            <!-- Input Form -->
            <div class="bg-white shadow-xl rounded-2xl p-6 w-full max-w-md mb-8 border border-purple-200">
                <input id="ideaTitle" type="text" placeholder="Idea Title"
                    class="w-full mb-3 p-3 border rounded-xl focus:outline-none focus:ring-2 focus:ring-purple-400" />

                <!-- Toggle Button -->
                <button id="toggleEditorBtn" onclick="toggleEditor()"
                    class="mb-3 px-3 py-2 bg-purple-500 text-white rounded-xl w-full hover:opacity-90">‚úèÔ∏è Advanced
                    Editor</button>

                <!-- Simple Textarea -->
                <textarea id="ideaDesc" placeholder="Describe your idea..."
                    class="w-full mb-3 p-3 border rounded-xl focus:outline-none focus:ring-2 focus:ring-purple-400"></textarea>

                <!-- Advanced Editor -->
                <div id="advancedEditor" class="hidden">
                    <div id="editorToolbar" class="flex flex-wrap mb-2">
                        <button onclick="format('bold')" class="px-2 py-1 border rounded">B</button>
                        <button onclick="format('italic')" class="px-2 py-1 border rounded italic">I</button>
                        <button onclick="format('underline')" class="px-2 py-1 border rounded underline">U</button>
                        <button onclick="format('insertUnorderedList')" class="px-2 py-1 border rounded">‚Ä¢ List</button>
                        <button onclick="format('insertOrderedList')" class="px-2 py-1 border rounded">1. List</button>
                        <button onclick="format('formatBlock','h1')" class="px-2 py-1 border rounded">H1</button>
                        <button onclick="format('formatBlock','h2')" class="px-2 py-1 border rounded">H2</button>
                        <button onclick="insertLink()" class="px-2 py-1 border rounded">üîó</button>
                        <button onclick="insertImage()" class="px-2 py-1 border rounded">üñºÔ∏è</button>
                        <button onclick="insertFile()" class="px-2 py-1 border rounded">üìé</button>
                        <button onclick="insertDriveEmbed()" class="px-2 py-1 border rounded">üìÇ Drive</button>
                    </div>
                    <div id="editor" contenteditable="true"
                        class="w-full h-40 p-3 border rounded-xl focus:outline-none focus:ring-2 focus:ring-purple-400 bg-white mb-3 overflow-y-auto">
                    </div>
                </div>

                <select id="ideaCategory"
                    class="w-full mb-3 p-3 border rounded-xl focus:outline-none focus:ring-2 focus:ring-purple-400">
                    <option value="">Select Category</option>
                    <option value="Work">Work</option>
                    <option value="Personal">Personal</option>
                    <option value="Startup">Startup</option>
                    <option value="Other">Other</option>
                </select>
                <button onclick="addIdea()"
                    class="w-full bg-gradient-to-r from-purple-500 to-blue-500 text-white py-3 rounded-xl font-semibold hover:opacity-90 transition">+
                    Add Idea</button>
            </div>

            <!-- Search & Filter -->
            <div class="flex flex-col sm:flex-row gap-4 mb-8 w-full max-w-4xl">
                <input id="searchInput" type="text" placeholder="üîç Search ideas..." oninput="renderIdeas()"
                    class="flex-1 p-3 border rounded-xl focus:outline-none focus:ring-2 focus:ring-purple-400" />
                <select id="filterCategory" onchange="renderIdeas()"
                    class="p-3 border rounded-xl focus:outline-none focus:ring-2 focus:ring-purple-400">
                    <option value="">All Categories</option>
                    <option value="Work">Work</option>
                    <option value="Personal">Personal</option>
                    <option value="Startup">Startup</option>
                    <option value="Other">Other</option>
                </select>
            </div>

            <!-- Ideas Container -->
            <div id="ideasContainer" class="grid gap-6 w-full max-w-5xl grid-cols-1 sm:grid-cols-2 lg:grid-cols-3">
            </div>
        </div>

        <!-- To-Do Sidebar -->
        <div
            class="w-full sm:w-96 h-screen bg-white border-t sm:border-t-0 sm:border-l shadow-xl p-6 flex flex-col sticky top-0">
            <h2 class="text-2xl font-bold mb-4 text-blue-600">‚úÖ To-Do List</h2>

            <!-- Input -->
            <div class="flex mb-4 gap-2">
                <input id="todoInput" type="text" placeholder="New task..."
                    class="flex-1 p-2 border rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-400">
                <button onclick="addTodo()" class="bg-blue-500 text-white px-4 rounded-xl hover:bg-blue-600">+</button>
            </div>

            <!-- Task List -->
            <ul id="todoList" class="flex-1 overflow-y-auto space-y-2"></ul>
        </div>
    </div>

    <script>
        // Password check
        function checkPassword() {
            const input = document.getElementById('passwordInput').value;
            if (input === "#Ilovecoding") {
                document.getElementById('passwordPopup').style.display = 'none';
                document.getElementById('appContent').style.display = 'flex';
            } else {
                document.getElementById('errorMsg').classList.remove('hidden');
            }
        }

        // Load data from localStorage
        let ideas = JSON.parse(localStorage.getItem('ideas')) || [];
        let todos = JSON.parse(localStorage.getItem('todos')) || [];
        let editorMode = localStorage.getItem('editorMode') || 'simple';

        // Toggle editor
        function toggleEditor() {
            if (editorMode === 'simple') {
                document.getElementById('editor').innerText = document.getElementById('ideaDesc').value;
                editorMode = 'advanced';
                document.getElementById('ideaDesc').classList.add('hidden');
                document.getElementById('advancedEditor').classList.remove('hidden');
                document.getElementById('toggleEditorBtn').innerText = '‚úèÔ∏è Simple Editor';
            } else {
                document.getElementById('ideaDesc').value = document.getElementById('editor').innerText;
                editorMode = 'simple';
                document.getElementById('ideaDesc').classList.remove('hidden');
                document.getElementById('advancedEditor').classList.add('hidden');
                document.getElementById('toggleEditorBtn').innerText = '‚úèÔ∏è Advanced Editor';
            }
            localStorage.setItem('editorMode', editorMode);
        }

        // Initialize editor mode
        window.onload = () => {
            if (editorMode === 'advanced') {
                document.getElementById('ideaDesc').classList.add('hidden');
                document.getElementById('advancedEditor').classList.remove('hidden');
                document.getElementById('toggleEditorBtn').innerText = '‚úèÔ∏è Simple Editor';
            }
            renderIdeas();
            renderTodos();
        }

        // Rich text editor commands
        function format(cmd, val = null) { document.execCommand(cmd, false, val); }
        function insertLink() { const url = prompt('Enter the link URL:'); if (url) format('createLink', url); }
        function insertImage() {
            const input = document.createElement('input'); input.type = 'file'; input.accept = 'image/*';
            input.onchange = () => {
                const file = input.files[0]; const reader = new FileReader();
                reader.onload = e => { const img = document.createElement('img'); img.src = e.target.result; img.className = "max-w-full h-auto rounded mt-2"; document.getElementById('editor').appendChild(img); }
                reader.readAsDataURL(file);
            }; input.click();
        }
        function insertFile() {
            const input = document.createElement('input'); input.type = 'file';
            input.onchange = () => {
                const file = input.files[0]; const reader = new FileReader();
                reader.onload = e => { const link = document.createElement('a'); link.href = e.target.result; link.download = file.name; link.innerText = `üìé ${file.name}`; link.className = "block text-blue-600 underline mt-2"; document.getElementById('editor').appendChild(link); }
                reader.readAsDataURL(file);
            }; input.click();
        }
        function insertDriveEmbed() {
            const url = prompt("Paste Google Drive share link (anyone with link can view):");
            if (url) { let embedUrl = url.replace("/view?usp=sharing", "/preview"); let iframe = `<iframe class="gdrive-embed" src="${embedUrl}"></iframe>`; document.getElementById('editor').insertAdjacentHTML("beforeend", iframe); }
        }

        // Ideas Functions
        function renderIdeas() {
            const container = document.getElementById('ideasContainer'); container.innerHTML = '';
            const searchQuery = document.getElementById('searchInput').value?.toLowerCase() || '';
            const filterCat = document.getElementById('filterCategory').value;
            const filteredIdeas = ideas.filter(idea => {
                const matchesSearch = idea.title.toLowerCase().includes(searchQuery) || (idea.desc || '').toLowerCase().includes(searchQuery) || (idea.descHtml || '').toLowerCase().includes(searchQuery);
                const matchesCategory = filterCat === '' || idea.category === filterCat; return matchesSearch && matchesCategory;
            });
            filteredIdeas.forEach((idea, index) => {
                const card = document.createElement('div'); card.className = "bg-white shadow-lg rounded-2xl p-6 flex flex-col justify-between border border-gray-200 hover:shadow-2xl transition";
                card.innerHTML = `<div>
          <h2 class="text-2xl font-bold mb-1 text-purple-700">${idea.title}</h2>
          <span class="inline-block px-2 py-1 rounded-full text-xs font-semibold mb-2 ${idea.category === 'Work' ? 'bg-blue-100 text-blue-700' : idea.category === 'Personal' ? 'bg-green-100 text-green-700' : idea.category === 'Startup' ? 'bg-yellow-100 text-yellow-700' : 'bg-gray-100 text-gray-700'}">${idea.category || 'Uncategorized'}</span>
          <div class="text-gray-600 mb-4 leading-relaxed">${idea.descHtml || idea.desc}</div></div>
          <div class="flex items-center justify-between mt-auto gap-2">
            <button onclick="toggleFavorite(${index})" class="px-3 py-1 rounded-lg ${idea.favorite ? 'bg-yellow-400 text-white' : 'bg-gray-200 text-gray-700'} hover:opacity-90">‚≠ê</button>
            <button onclick="editIdea(${index})" class="flex-1 bg-yellow-400 text-white px-3 py-1 rounded-lg hover:bg-yellow-500">Edit</button>
            <button onclick="deleteIdea(${index})" class="flex-1 bg-red-500 text-white px-3 py-1 rounded-lg hover:bg-red-600">Delete</button>
          </div>`;
                container.appendChild(card);
            });
        }
        function addIdea() {
            const title = document.getElementById('ideaTitle').value.trim();
            const category = document.getElementById('ideaCategory').value;
            let desc = '', descHtml = '';
            if (editorMode === 'simple') { desc = document.getElementById('ideaDesc').value.trim(); } else { descHtml = document.getElementById('editor').innerHTML.trim(); }
            if (title === '' || (desc === '' && descHtml === '')) { alert('Please enter both a title and a description!'); return; }
            ideas.push({ title, desc, descHtml, category, favorite: false, date: new Date().toLocaleString() });
            localStorage.setItem('ideas', JSON.stringify(ideas));
            document.getElementById('ideaTitle').value = ''; document.getElementById('ideaDesc').value = ''; document.getElementById('editor').innerHTML = ''; document.getElementById('ideaCategory').value = '';
            renderIdeas();
        }
        function editIdea(index) {
            const idea = ideas[index]; document.getElementById('ideaTitle').value = idea.title; 
            document.getElementById('ideaCategory').value = idea.category;
            if (idea.descHtml) { if (editorMode === 'simple') toggleEditor(); 
            document.getElementById('editor').innerHTML = idea.descHtml; }
             else { if (editorMode === 'advanced') toggleEditor(); 
            document.getElementById('ideaDesc').value = idea.desc; } deleteIdea(index);
        }
        function deleteIdea(index) { ideas.splice(index, 1); localStorage.setItem('ideas', JSON.stringify(ideas)); renderIdeas(); }
        function toggleFavorite(index) { ideas[index].favorite = !ideas[index].favorite; localStorage.setItem('ideas', JSON.stringify(ideas)); renderIdeas(); }

        // To-Do List Functions
        function renderTodos() {
            const list = document.getElementById('todoList'); list.innerHTML = '';
            todos.forEach((todo, i) => {
                const li = document.createElement('li');
                li.className = "flex items-center justify-between bg-gray-100 rounded-xl px-3 py-2";
                li.innerHTML = `<div class="flex items-center gap-2">
          <input type="checkbox" ${todo.done ? 'checked' : ''} onchange="toggleTodo(${i})" class="w-4 h-4">
          <span class="${todo.done ? 'line-through text-gray-500' : ''}">${todo.text}</span></div>
          <button onclick="deleteTodo(${i})" class="text-red-500 hover:text-red-700">‚úï</button>`;
                list.appendChild(li);
            });
        }
        function addTodo() { const input = document.getElementById('todoInput'); const text = input.value.trim(); if (!text) return; todos.push({ text, done: false }); localStorage.setItem('todos', JSON.stringify(todos)); input.value = ''; renderTodos(); }
        function toggleTodo(i) { todos[i].done = !todos[i].done; localStorage.setItem('todos', JSON.stringify(todos)); renderTodos(); }
        function deleteTodo(i) { todos.splice(i, 1); localStorage.setItem('todos', JSON.stringify(todos)); renderTodos(); }
    </script>
</body>

</html>